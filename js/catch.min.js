var Ajaxpect={addBefore:function(a,b,c){var d=function(a){return function(){return a.apply(this,c(arguments,a,this))}};this._process(a,b,d)},addAfter:function(a,b,c){var d=function(a){return function(){return c(a.apply(this,arguments),arguments,a,this)}};this._process(a,b,d)},addAround:function(a,b,c){var d=function(a){return function(){return c(arguments,a,this)}};this._process(a,b,d)},_process:function(a,b,c){var d;if(b.exec?d=function(a){return b.exec(a)}:b.call&&(d=function(a){return b.call(this,a)}),d)for(var e in a)"function"==typeof a[e]&&d(e)&&this._attach(a,e,c);else this._attach(a,b,c)},_attach:function(a,b,c){var d=a[b];a[b]=c(d)}},ErrorHandler=function(a){var b=this,c=a;b.errorQueue=[],b.sendingErrors=!1,b.lastErrorQueueSendTime=null,b.lastQueueSendTime=null,b.onErrorCode="RM-500",b.jQueryBindErrorCode="RM-501",b.jsonResponseFailCode="RM-503",b.socialErrorCode="RMS-500",b.uploadErrorCode="RMU-500",b.init=function(){window.onerror=b.errorOccurred},b.interceptionMethods=function(a){var b=!0;switch(void 0!==a&&null!==a&&(b=!1),a){case"log":case"alert":case"":b=!1;break;default:b=!0}return b},b.interceptTryCatch=function(a,d){var e="Anonymous",f="Anonymous";d.name&&(e=d.name),a.callee&&a.callee.caller&&a.callee.caller.name&&(f=a.callee.caller.name);try{if(0===a.length)return d();if(1===a.length)return d(a[0]);if(2===a.length)return d(a[0],a[1]);if(3===a.length)return d(a[0],a[1],a[2]);if(4===a.length)return d(a[0],a[1],a[2],a[3]);if(5===a.length)return d(a[0],a[1],a[2],a[3],a[4]);if(6===a.legnth)return d(a[0],a[1],a[2],a[3],a[4],a[5])}catch(g){var h="Error in "+e+" ";h+=g.message+" "+g.stack,b.sendErrorToServer(h,"RM-500",function(){c.log("ErrorHandler - interceptTryCatch done reporting to server")})}},b.handleAjaxComplete=function(a,c,d){var e=null,f=!0;if(null!==c.responseText)try{e=JSON.parse(c.responseText)}catch(g){f=!1}if(null!==e&&e.success&&e.success===!1){var h="False returned. Message: "+JSON.stringify(e);h+=" \r\n URL: "+d.url,b.sendErrorToServer(h,b.jsonResponseFailCode,null)}},b.handleAjaxError=function(a,d,e,f){c.log("ErrorHandler - jQuery global ajaxError being called"),c.log("jQXHR: "+JSON.stringify(d)),c.log("settings: "+JSON.stringify(e)),c.log("Exception: "+JSON.stringify(f));var g="Response Text: "+d.responseText+" \r\n";g+="Status: "+d.status+" \r\n",g+="Data: "+e.data+" \r\n",g+="Url: "+e.url+" \r\n",g+="Exception: "+f,b.sendErrorToServer(g,"JQA"+d.statusText,function(){c.log("ErrorHandler - jQuery ajaxError done reporting to server")})},b.registerJQueryBindErrorCatching=function(){var a=jQuery.fn.bind;jQuery.fn.bind=function(d,e,f){if(!f&&e&&"function"==typeof e&&(f=e,e=null),f){var g=f,h=jQuery.proxy(g,function(){try{return g.apply(this,arguments)}catch(a){var d="jQuery bind error. Exception: "+JSON.stringify(a);c.log("********"),c.log("ErrorHandler - jquery Bind Error happened. Handling error here. "),c.log("********"),b.sendErrorToServer(d,b.jQueryBindErrorCode,null)}});f=h}return a.call(this,d,e,f)}},b.sendErrorToServer=function(a,b,c){console.log("Error Message: "+a),console.log("Error Code: ReferenceError"),console.log("Error Callback: "+c)},b.errorOccurred=function(a,d,e){c.log("ErrorHandler - errorOccurred: "+JSON.stringify(a)+" "+d+" "+e),b.sendErrorToServer("Window.onerror caught an error: "+a,b.onErrorCode);try{unused++}catch(f){c.log(JSON.stringify(f))}return!1},b.sendErrorQueueToServer=function(){var a="http://localhost:3000/catch/jserror",d={error_list:b.errorQueue,user_id:c.user.id,build_number:buildNumber};try{$.ajax({type:"POST",url:a,data:d,success:function(a){a===!1?console.log("ErrorHandler - Failed on sending error!"):(b.lastQueueSendTime=new Date,callBack&&callBack())},error:function(a){c.log("ErrorHandler - sendErrorToServer - failed "+JSON.stringify(a))},dataType:"JSON"})}catch(e){c.log("ErrorHandler - sendErrorToServer - failed")}},b.hasErrorsToReport=function(){return!0},b.addErrorToQueue=function(a){b.errorQueue.push(a)}};